async function aiFallback(text) {
  try {
    const response = await fetch("/api/ai", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text })
    });

    const data = await response.json();

    if (data.error) {
      console.error("API Hatası:", data.error);
      speak("Sistem hatası oldu Ayşe Teyze.");
      return;
    }

    const result = data.choices[0].message.content;
    console.log("AI Yanıtı:", result);

    // Basit ürün parse
    const match = result.match(/(\d+)\s*(kilo|kg|adet)?\s*(\w+)/i);
    if (match) {
      const qty = parseInt(match[1]) || 1;
      const unit = match[2] || "adet";
      const product = match[3];

      cart.push({ name: product, qty, unit });
      updateCartUI();
      speak(`${qty} ${unit} ${product} sepete eklendi ✔️`);
    } else {
      speak("Tam anlayamadım Ayşe Teyze, tekrar deneyelim.");
    }
  } catch (err) {
    console.error("Frontend Hatası:", err);
    speak("Sistem hatası oldu Ayşe Teyze.");
  }
}
