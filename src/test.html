<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sesli Sipari≈ü - Onur Market</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5d3ebc;
            --primary-light: #7849f7;
            --secondary: #ffd300;
            --accent: #ff6b00;
            --dark: #1a1a1a;
            --light: #f8f9fa;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --success: #28a745;
            --danger: #dc3545;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: 1.6;
        }
        
        /* Header Styles */
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 22px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .logo-icon::after {
            content: "";
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--secondary);
            border-radius: 50%;
            bottom: 5px;
            right: 5px;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .action-btn {
            background: none;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: var(--transition);
            color: var(--dark);
            font-weight: 500;
            font-size: 14px;
        }
        
        .action-btn:hover {
            background: var(--gray-light);
        }
        
        .order-summary {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--primary);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .order-summary:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }
        
        .order-count {
            background: var(--secondary);
            color: var(--dark);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .language-selector {
            position: relative;
        }
        
        .language-btn {
            background: none;
            border: none;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 10px 0;
            width: 200px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 10;
        }
        
        .language-dropdown.show {
            display: block;
        }
        
        .language-option {
            padding: 10px 15px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .language-option:hover {
            background: var(--gray-light);
        }
        
        .language-option.active {
            background: var(--primary);
            color: white;
        }
        
        /* Banner Styles */
        .banner {
            position: relative;
            height: 300px;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 30px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            padding: 0 20px;
        }
        
        .banner-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.2;
        }
        
        .banner-content {
            position: relative;
            z-index: 2;
            max-width: 600px;
        }
        
        .banner h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .banner p {
            font-size: 1.1rem;
            margin-bottom: 20px;
            opacity: 0.9;
        }
        
        /* Main Content */
        .main-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            flex: 1;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: var(--primary);
        }
        
        /* Horizontal Scroll Containers */
        .scroll-container {
            position: relative;
            margin-bottom: 30px;
        }
        
        .scroll-content {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px 0;
            scroll-behavior: smooth;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .scroll-content::-webkit-scrollbar {
            display: none;
        }
        
        .scroll-btn {
            position: absolute;
            top: 82%;
            transform: translateY(-50%);
            background: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            z-index: 10;
            transition: var(--transition);
        }
        
        .scroll-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        .scroll-btn.left {
            left: 50px;
        }
        
        .scroll-btn.right {
            right: 50px;
        }
        
        /* Store Type Cards (Horizontal) */
        .seller-type-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            min-width: 150px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .seller-type-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .seller-type-card.selected {
            border-color: var(--primary);
            background: rgba(93, 62, 188, 0.05);
        }
        
        .seller-type-icon {
            font-size: 32px;
            color: var(--primary);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(93, 62, 188, 0.1);
        }
        
        .seller-type-name {
            font-weight: 600;
            font-size: 16px;
        }
        
        /* Seller Cards (Horizontal) */
        .seller-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            min-width: 280px;
            flex-shrink: 0;
        }
        
        .seller-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .seller-card.selected {
            border-color: var(--success);
        }
        
        .seller-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
        }
        
        .seller-info {
            padding: 15px;
        }
        
        .seller-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 18px;
        }
        
        .seller-details {
            font-size: 14px;
            color: var(--gray);
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .seller-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--secondary);
        }
        
        .delivery-info {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--gray-light);
        }
        
        .delivery-fee {
            font-size: 14px;
            color: var(--primary);
            font-weight: 600;
        }
        
        .delivery-fee.free {
            color: var(--success);
        }
        
        .min-order {
            font-size: 12px;
            color: var(--gray);
            margin-top: 2px;
        }
        
        /* Category Cards (Horizontal) */
        .category-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            min-width: 150px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .category-card.selected {
            border-color: var(--success);
            background: rgba(40, 167, 69, 0.05);
        }
        
        .category-icon {
            font-size: 32px;
            color: var(--success);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(40, 167, 69, 0.1);
        }
        
        .category-name {
            font-weight: 600;
            font-size: 16px;
        }
        
        /* Product Cards (Horizontal) */
        .products-section {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .product-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--gray-light);
            min-width: 200px;
            flex-shrink: 0;
        }
        
        .product-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .product-image {
            width: 100%;
            height: 140px;
            object-fit: cover;
        }
        
        .product-info {
            padding: 15px;
        }
        
        .product-name {
            font-weight: 500;
            margin-bottom: 5px;
            font-size: 14px;
            height: 40px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .product-price {
            font-weight: 600;
            color: var(--primary);
            font-size: 16px;
        }
        
        .product-discount {
            color: var(--danger);
            font-size: 12px;
            text-decoration: line-through;
            margin-left: 5px;
        }
        
        .add-to-cart-btn {
            margin-top: 10px;
            width: 100%;
            padding: 10px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .add-to-cart-btn:hover {
            background: var(--primary-light);
        }
        
        /* Cart Section */
        .cart-container {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }
        
        .cart-container.open {
            right: 0;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .cart-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--gray);
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .cart-item-info {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }
        
        .cart-item-image {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
        }
        
        .cart-item-details {
            font-size: 14px;
        }
        
        .cart-item-name {
            font-weight: 500;
        }
        
        .cart-item-price {
            color: var(--gray);
            font-size: 12px;
        }
        
        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid var(--gray-light);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .quantity-btn:hover {
            background: var(--gray-light);
        }
        
        .cart-totals {
            border-top: 1px solid var(--gray-light);
            padding: 20px;
        }
        
        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .total-final {
            font-weight: 600;
            font-size: 18px;
            border-top: 1px solid var(--gray-light);
            padding-top: 10px;
        }
        
        .payment-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
            padding: 0 20px 20px;
        }
        
        .payment-btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .payment-btn.cash {
            background: var(--success);
            color: white;
        }
        
        .payment-btn.card {
            background: var(--primary);
            color: white;
        }
        
        .payment-btn.bonus {
            background: var(--accent);
            color: white;
            grid-column: 1 / -1;
        }
        
        .payment-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 40px 0 20px;
            margin-top: auto;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 18px;
            color: var(--secondary);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }
        
        .social-link:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }
        
        .partner-login {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .partner-login:hover {
            background: var(--primary-light);
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid #444;
            font-size: 14px;
            color: #aaa;
        }
        
        /* Voice Assistant */
        .voice-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 300px;
            z-index: 100;
            display: block;
        }
        
        .status-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .status-title {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: var(--dark);
        }
        
        .status-title i {
            margin-right: 8px;
            color: var(--accent);
        }
        
        .status-close {
            background: none;
            border: none;
            font-size: 16px;
            cursor: pointer;
            color: var(--gray);
        }
        
        .status-content {
            margin-bottom: 15px;
        }
        
        .assistant-message {
            padding: 12px;
            background: rgba(93, 62, 188, 0.1);
            border-radius: 8px;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .user-message {
            padding: 12px;
            background: rgba(255, 107, 0, 0.1);
            border-radius: 8px;
            text-align: right;
            color: var(--accent);
        }
        
        .voice-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 30px;
            margin-top: 10px;
        }
        
        .voice-bar {
            width: 6px;
            height: 10px;
            background: #ddd;
            margin: 0 3px;
            border-radius: 3px;
        }
        
        .listening .voice-bar {
            animation: voiceIndicator 0.8s infinite;
        }
        
        @keyframes voiceIndicator {
            0%, 100% { height: 10px; background: #ddd; }
            50% { height: 30px; background: var(--accent); }
        }
        
        /* Location Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 100%;
            box-shadow: var(--shadow);
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .close-modal {
            cursor: pointer;
            font-size: 24px;
            color: var(--gray);
        }
        
        .location-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        
        .location-option {
            padding: 20px;
            border: 2px solid var(--gray-light);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .location-option:hover {
            border-color: var(--primary);
            background: rgba(93, 62, 188, 0.05);
        }
        
        .location-option.selected {
            border-color: var(--primary);
            background: rgba(93, 62, 188, 0.1);
        }
        
        .location-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .location-details h4 {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .location-details p {
            color: var(--gray);
            font-size: 14px;
        }
        
        .location-detect-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 20px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
        }
        
        .location-detect-btn:hover {
            background: var(--primary-light);
        }
        
        .location-detect-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
        }
        
        .location-result {
            border-left: 4px solid var(--primary);
            padding: 15px;
            background: rgba(93, 62, 188, 0.05);
            border-radius: 8px;
            margin-top: 15px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .logo {
                font-size: 20px;
            }
            
            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .banner {
                height: 250px;
            }
            
            .banner h1 {
                font-size: 2rem;
            }
            
            .banner p {
                font-size: 1rem;
            }
            
            .scroll-btn {
                display: none;
            }
            
            .cart-container {
                width: 100%;
                right: -100%;
            }
            
            .voice-status {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }
            
            .footer-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }
        
        /* Animation for logo */
        @keyframes logoPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .logo-icon {
            animation: logoPulse 2s infinite;
        }

  #sellerTypeGrid {
   display: flex;
   gap: 15px;
   overflow-x: auto;
}
    </style>

</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="#" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <span data-translate="app_name">Sesli Sipari≈ü</span>
            </a>
            
            <div class="header-actions">
                <div class="language-selector">
                    <button class="language-btn" id="languageBtn">
                        <i class="fas fa-globe"></i>
                        <span id="currentLanguage">TR</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="language-dropdown" id="languageDropdown">
                        <!-- Languages will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="location-marker action-btn" id="locationMarker">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="locationText" data-translate="select_location">Konum Se√ßin</span>
                </div>
                
                <div class="order-summary" id="orderSummary" style="display: flex;">
                    <div class="order-count" id="orderCount">0</div>
                    <div data-translate="order">Sipari≈ü: <span id="orderTotal">0 ‚Ç∫</span></div>
                </div>
               
                <div class="profile-info">
                    <button class="action-btn" id="profileBtn">
                        <i class="fas fa-user"></i>
                        <span id="userName" data-translate="profile">Profilim</span>
                    </button>
                    <div class="profile-dropdown" id="profileDropdown">
                        <!-- Profile dropdown content -->
                    </div>
                </div>
			
                <button id="microphoneToggle" class="action-btn">
                    <i class="fas fa-microphone-slash"></i>
                    <span data-translate="microphone_off">Mikrofon (Kapalƒ±)</span>
                </button>
            </div>
        </div>
</header>


    <!-- Banner -->
    <div class="banner" id="banner">
        <video class="banner-video" id="bannerVideo" loop muted autoplay>
            <!-- Video will be set dynamically based on store type -->
        </video>
        <div class="banner-content">
            <h1 id="bannerTitle" data-translate="banner_title">Sesli Sipari≈ü ile Kolay Alƒ±≈üveri≈ü</h1>
            <p id="bannerDescription" data-translate="banner_description">Sadece konu≈üun, sipari≈üiniz kapƒ±nƒ±zda!</p>
            <button class="location-detect-btn" id="bannerLocationBtn">
                <i class="fas fa-location-arrow"></i>
                <span data-translate="detect_location">Konumumu Belirle</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-container">
         <!-- Seller Type Selection -->
        <section>
    <h2 class="section-title">Ne yemek istersiniz?</h2>
    <div class="seller-type-container">
        <button class="scroll-btn left" id="scrollStoreTypesLeft">
            <i class="fas fa-chevron-left"></i>
			
        </button>
        <div class="scroll-content" id="sellerTypeGrid">
            <!-- DB‚Äôden gelen maƒüaza tipleri buraya basƒ±lacak -->
        </div>
        <button class="scroll-btn right" id="scrollStoreTypesRight">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</section>

        <!-- Sellers Grid -->
        <section id="sellersSection" style="display: none;">
            <h2 class="section-title" data-translate="nearest_places">
                <i class="fas fa-store"></i>
                Size En Yakƒ±n Yerler
            </h2>
            <div class="scroll-container">
                <button class="scroll-btn left" id="scrollSellersLeft">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="scroll-content" id="sellerGrid">
                    <!-- Sellers will be loaded here -->
                </div>
                <button class="scroll-btn right" id="scrollSellersRight">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </section>

        <!-- Categories Grid -->
        <section id="categoriesSection" style="display: none;">
            <h2 class="section-title" id="categoriesTitle" data-translate="categories">
                <i class="fas fa-layer-group"></i>
                Kategoriler
            </h2>
            <div class="scroll-container">
                <button class="scroll-btn left" id="scrollCategoriesLeft">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="scroll-content" id="categoriesGrid">
                    <!-- Categories will be loaded here -->
                </div>
                <button class="scroll-btn right" id="scrollCategoriesRight">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </section>

        <!-- Products Grid -->
        <section class="products-section" id="productsSection" style="display: none;">
            <div class="products-header">
                <h2 class="section-title" style="margin-bottom: 0;" data-translate="products">
                    <i class="fas fa-box-open"></i>
                    √úr√ºnler
                </h2>
                <div id="selectedSellerInfo" class="text-gray">Satƒ±cƒ± se√ßilmedi</div>
            </div>
            <div class="scroll-container">
                <button class="scroll-btn left" id="scrollProductsLeft">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="scroll-content" id="productsGrid">
                    <!-- Products will be loaded here -->
                </div>
                <button class="scroll-btn right" id="scrollProductsRight">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </section>
    </div>

    <!-- Location Modal -->
    <div id="locationModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" data-translate="select_location">Konum Se√ßiniz</h3>
                <span class="close-modal" id="closeLocationModal">&times;</span>
            </div>
            <div class="modal-body">
                <p data-translate="location_description">L√ºtfen sipari≈ü vermek istediƒüiniz konumu se√ßin:</p>
                <div class="location-options">
                    <div class="location-option" data-location="inside">
                        <div class="location-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <div class="location-details">
                            <h4 data-translate="inside_restaurant">Restoran i√ßinde</h4>
                            <p data-translate="inside_description">Yemeƒüinizi restoranda yiyin</p>
                        </div>
                    </div>
                    <div class="location-option" data-location="takeaway">
                        <div class="location-icon">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <div class="location-details">
                            <h4 data-translate="takeaway">Paket servis</h4>
                            <p data-translate="takeaway_description">Yemeƒüinizi kendiniz alƒ±n</p>
                        </div>
                    </div>
                    <div class="location-option" data-location="delivery">
                        <div class="location-icon">
                            <i class="fas fa-motorcycle"></i>
                        </div>
                        <div class="location-details">
                            <h4 data-translate="delivery">Adrese teslim</h4>
                            <p data-translate="delivery_description">Yemeƒüiniz adresinize gelsin</p>
                        </div>
                    </div>
                </div>
                
                <button id="detectLocationBtn" class="location-detect-btn">
                    <i class="fas fa-location-arrow"></i>
                    <span data-translate="auto_detect">Konumumu Otomatik Belirle</span>
                </button>
                
                <div id="locationResult" class="location-result" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Cart Section -->
    <div class="cart-container" id="cartContainer">
        <div class="cart-header">
            <h2 data-translate="your_cart">Sepetiniz</h2>
            <button class="cart-close" id="cartClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="text-center" style="padding: 30px; color: var(--gray);">
                <i class="fas fa-shopping-cart fa-2x mb-3"></i>
                <p data-translate="empty_cart">Sepetiniz bo≈ü</p>
            </div>
        </div>
        <div class="cart-totals">
            <div class="total-row">
                <span data-translate="subtotal">Ara Toplam:</span>
                <span id="subtotal">0 ‚Ç∫</span>
            </div>
            <div class="total-row">
                <span data-translate="discount">ƒ∞ndirim:</span>
                <span id="discount">0 ‚Ç∫</span>
            </div>
            <div class="total-row">
                <span data-translate="vat">KDV (%18):</span>
                <span id="vatAmount">0 ‚Ç∫</span>
            </div>
            <div class="total-row total-final">
                <span data-translate="total">Toplam:</span>
                <span id="totalAmount">0 ‚Ç∫</span>
            </div>
        </div>
        <div class="payment-buttons">
            <button class="payment-btn cash" id="payCash" data-translate="pay_cash">Nakit √ñde</button>
            <button class="payment-btn card" id="payCard" data-translate="pay_card">Kartla √ñde</button>
            <button class="payment-btn bonus" id="payBonus" data-translate="pay_bonus">Bonus ile √ñde</button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3 data-translate="app_name">Sesli Sipari≈ü</h3>
                <p data-translate="footer_description">Sesli komutlarla kolayca sipari≈ü verin. Hƒ±zlƒ±, g√ºvenli ve pratik alƒ±≈üveri≈ü deneyimi.</p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/?text=Merhaba!%20Sesli%20Sipari≈ü%20sisteminden%20alƒ±≈üveri≈ü%20yapmak%20istiyorum." class="social-link" target="_blank"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3 data-translate="quick_links">Hƒ±zlƒ± Baƒülantƒ±lar</h3>
                <ul class="footer-links">
                    <li><a href="#" id="referralLink"><i class="fas fa-link"></i> <span data-translate="referral_link">Referans Linki</span></a></li>
                    <li><a href="#" id="whatsappOrder"><i class="fab fa-whatsapp"></i> <span data-translate="whatsapp_order">WhatsApp ile Sipari≈ü</span></a></li>
                    <li><a href="#"><i class="fas fa-shopping-bag"></i> <span data-translate="my_orders">Sipari≈ülerim</span></a></li>
                    <li><a href="#"><i class="fas fa-question-circle"></i> <span data-translate="help">Yardƒ±m</span></a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3 data-translate="contact">ƒ∞leti≈üim</h3>
                <ul class="footer-links">
                    <li><a href="tel:08501234567"><i class="fas fa-phone"></i> 0850 123 45 67</a></li>
                    <li><a href="mailto:info@seslisiparis.com"><i class="fas fa-envelope"></i> info@seslisiparis.com</a></li>
                    <li><a href="#"><i class="fas fa-map-marker-alt"></i> <span data-translate="location">ƒ∞stanbul, T√ºrkiye</span></a></li>
                </ul>
                <a href="#" class="partner-login" data-translate="partner_login">Partner Giri≈üi</a>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2023 Sesli Sipari≈ü Sistemi. <span data-translate="all_rights_reserved">T√ºm haklarƒ± saklƒ±dƒ±r.</span></p>
        </div>
    </footer>

    <!-- Voice Assistant -->
    <div class="voice-status" id="voiceStatusPanel">
        <div class="status-header">
            <div class="status-title">
                <i class="fas fa-microphone"></i>
                <span data-translate="voice_assistant">Sesli Asistan</span>
            </div>
            <button class="status-close" id="closeVoiceStatus">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="status-content">
            <div class="assistant-message" id="assistantMessage" data-translate="welcome_message">Merhaba! Sipari≈ü vermek i√ßin mikrofonu a√ßƒ±n ve konu≈üun.</div>
            <div class="user-message" id="userMessage"></div>
        </div>
        <div class="voice-indicator" id="voiceIndicator">
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
        </div>
    </div>
<script>
        // =============================================
        // √áOKLU Dƒ∞L DESTEƒûƒ∞
        // =============================================
        
        const translations = {
            tr: {
                app_name: "Sesli Sipari≈ü",
                select_location: "Konum Se√ßin",
                order: "Sipari≈ü:",
                profile: "Profilim",
                microphone_off: "Mikrofon (Kapalƒ±)",
                banner_title: "Sesli Sipari≈ü ile Kolay Alƒ±≈üveri≈ü",
                banner_description: "Sadece konu≈üun, sipari≈üiniz kapƒ±nƒ±zda!",
                detect_location: "Konumumu Belirle",
                what_to_eat: "Ne yemek istersiniz?",
                nearest_places: "Size En Yakƒ±n Yerler",
                categories: "Kategoriler",
                products: "√úr√ºnler",
                inside_restaurant: "Restoran i√ßinde",
                inside_description: "Yemeƒüinizi restoranda yiyin",
                takeaway: "Paket servis",
                takeaway_description: "Yemeƒüinizi kendiniz alƒ±n",
                delivery: "Adrese teslim",
                delivery_description: "Yemeƒüiniz adresinize gelsin",
                auto_detect: "Konumumu Otomatik Belirle",
                your_cart: "Sepetiniz",
                empty_cart: "Sepetiniz bo≈ü",
                subtotal: "Ara Toplam:",
                discount: "ƒ∞ndirim:",
                vat: "KDV (%18):",
                total: "Toplam:",
                pay_cash: "Nakit √ñde",
                pay_card: "Kartla √ñde",
                pay_bonus: "Bonus ile √ñde",
                footer_description: "Sesli komutlarla kolayca sipari≈ü verin. Hƒ±zlƒ±, g√ºvenli ve pratik alƒ±≈üveri≈ü deneyimi.",
                quick_links: "Hƒ±zlƒ± Baƒülantƒ±lar",
                referral_link: "Referans Linki",
                whatsapp_order: "WhatsApp ile Sipari≈ü",
                my_orders: "Sipari≈ülerim",
                help: "Yardƒ±m",
                contact: "ƒ∞leti≈üim",
                location: "ƒ∞stanbul, T√ºrkiye",
                partner_login: "Partner Giri≈üi",
                all_rights_reserved: "T√ºm haklarƒ± saklƒ±dƒ±r.",
                voice_assistant: "Sesli Asistan",
                welcome_message: "Merhaba! Sipari≈ü vermek i√ßin mikrofonu a√ßƒ±n ve konu≈üun.",
                location_description: "L√ºtfen sipari≈ü vermek istediƒüiniz konumu se√ßin:"
            },
            en: {
                app_name: "Voice Order",
                select_location: "Select Location",
                order: "Order:",
                profile: "My Profile",
                microphone_off: "Microphone (Off)",
                banner_title: "Easy Shopping with Voice Order",
                banner_description: "Just speak, your order is at your door!",
                detect_location: "Detect My Location",
                what_to_eat: "What would you like to eat?",
                nearest_places: "Nearest Places to You",
                categories: "Categories",
                products: "Products",
                inside_restaurant: "Inside Restaurant",
                inside_description: "Eat your meal at the restaurant",
                takeaway: "Takeaway",
                takeaway_description: "Pick up your meal yourself",
                delivery: "Home Delivery",
                delivery_description: "Your meal delivered to your address",
                auto_detect: "Auto Detect My Location",
                your_cart: "Your Cart",
                empty_cart: "Your cart is empty",
                subtotal: "Subtotal:",
                discount: "Discount:",
                vat: "VAT (%18):",
                total: "Total:",
                pay_cash: "Pay Cash",
                pay_card: "Pay by Card",
                pay_bonus: "Pay with Bonus",
                footer_description: "Order easily with voice commands. Fast, secure and practical shopping experience.",
                quick_links: "Quick Links",
                referral_link: "Referral Link",
                whatsapp_order: "Order via WhatsApp",
                my_orders: "My Orders",
                help: "Help",
                contact: "Contact",
                location: "Istanbul, Turkey",
                partner_login: "Partner Login",
                all_rights_reserved: "All rights reserved.",
                voice_assistant: "Voice Assistant",
                welcome_message: "Hello! Turn on the microphone to place an order and start speaking.",
                location_description: "Please select the location where you want to place your order:"
            },
            ge: {
                app_name: "·ÉÆ·Éõ·Éù·Éï·Éê·Éú·Éò ·É®·Éî·Éô·Éï·Éî·Éó·Éê",
                select_location: "·Éê·Éò·É†·É©·Éò·Éî·Éó ·Éõ·Éì·Éî·Éë·Éê·É†·Éî·Éù·Éë·Éê",
                order: "·É®·Éî·Éô·Éï·Éî·Éó·Éê:",
                profile: "·É©·Éî·Éõ·Éò ·Éû·É†·Éù·É§·Éò·Éö·Éò",
                microphone_off: "·Éõ·Éò·Éô·É†·Éù·É§·Éù·Éú·Éò (·Éí·Éê·Éõ·Éù·É†·Éó·É£·Éö·Éò·Éê)",
                banner_title: "·Éõ·Éê·É†·É¢·Éò·Éï·Éò ·É®·Éù·Éû·Éò·Éú·Éí·Éò ·ÉÆ·Éõ·Éù·Éï·Éê·Éú·Éò ·É®·Éî·Éô·Éï·Éî·Éó·Éò·Éó",
                banner_description: "·É£·Éë·É†·Éê·Éö·Éù·Éì ·Éö·Éê·Éû·Éê·É†·Éê·Éô·Éò, ·Éó·É•·Éï·Éî·Éú·Éò ·É®·Éî·Éô·Éï·Éî·Éó·Éê ·Éó·É•·Éï·Éî·Éú·É° ·Éô·Éê·É†·Éñ·Éî·Éê!",
                detect_location: "·Éí·Éê·Éú·É°·Éê·Éñ·É¶·Éï·É†·Éî·Éó ·É©·Éî·Éõ·Éò ·Éõ·Éì·Éî·Éë·Éê·É†·Éî·Éù·Éë·Éê",
                what_to_eat: "·É†·Éê ·Éí·Éò·Éú·Éì·Éê·Éó ·É≠·Éê·Éõ·Éù·Éó?",
                nearest_places: "·É£·Éê·ÉÆ·Éö·Éù·Éî·É°·Éò ·Éê·Éì·Éí·Éò·Éö·Éî·Éë·Éò ·Éó·É•·Éï·Éî·Éú·Éó·Éê·Éú",
                categories: "·Éô·Éê·É¢·Éî·Éí·Éù·É†·Éò·Éî·Éë·Éò",
                products: "·Éû·É†·Éù·Éì·É£·É•·É¢·Éî·Éë·Éò",
                inside_restaurant: "·É†·Éî·É°·É¢·Éù·É†·Éú·Éò·É° ·É®·Éò·Éí·Éú·Éò·Éó",
                inside_description: "·Éõ·Éò·Éò·É†·Éó·Éï·Éò·Éó ·Éó·É•·Éï·Éî·Éú·Éò ·Éô·Éï·Éî·Éë·Éê ·É†·Éî·É°·É¢·Éù·É†·Éú·É®·Éò",
                takeaway: "Takeaway",
                takeaway_description: "·Éó·Éê·Éï·Éê·Éì ·É¨·Éê·Éò·É¶·Éî·Éó ·Éó·É•·Éï·Éî·Éú·Éò ·Éô·Éï·Éî·Éë·Éê",
                delivery: "·É°·Éê·ÉÆ·Éö·Éò·É° ·Éõ·Éò·É¢·Éê·Éú·Éê",
                delivery_description: "·Éó·É•·Éï·Éî·Éú·Éò ·Éô·Éï·Éî·Éë·Éê ·Éõ·Éò·Éò·É¢·Éê·Éú·Éî·Éë·Éê ·Éó·É•·Éï·Éî·Éú·É° ·Éõ·Éò·É°·Éê·Éõ·Éê·É†·Éó·Éñ·Éî",
                auto_detect: "·Éê·Éï·É¢·Éù·Éõ·Éê·É¢·É£·É†·Éê·Éì ·Éí·Éê·Éú·É°·Éê·Éñ·É¶·Éï·É†·Éî·Éó ·É©·Éî·Éõ·Éò ·Éõ·Éì·Éî·Éë·Éê·É†·Éî·Éù·Éë·Éê",
                your_cart: "·Éó·É•·Éï·Éî·Éú·Éò ·Éô·Éê·Éö·Éê·Éó·Éê",
                empty_cart: "·Éó·É•·Éï·Éî·Éú·Éò ·Éô·Éê·Éö·Éê·Éó·Éê ·É™·Éê·É†·Éò·Éî·Éö·Éò·Éê",
                subtotal: "·É®·É£·Éê·Éö·Éî·Éì·É£·É†·Éò ·ÉØ·Éê·Éõ·Éò:",
                discount: "·É§·Éê·É°·Éì·Éê·Éô·Éö·Éî·Éë·Éê:",
                vat: "·Éì·É¶·Éí (%18):",
                total: "·É°·É£·Éö:",
                pay_cash: "·Éí·Éê·Éì·Éê·Éò·ÉÆ·Éê·Éì·Éî·Éó ·Éú·Éê·É¶·Éì·Éò ·Éê·Éú·Éí·Éê·É†·Éò·É®·É°·É¨·Éù·É†·Éî·Éë·Éò·Éó",
                pay_card: "·Éí·Éê·Éì·Éê·Éò·ÉÆ·Éê·Éì·Éî·Éó ·Éë·Éê·É†·Éê·Éó·Éò·Éó",
                pay_bonus: "·Éí·Éê·Éì·Éê·Éò·ÉÆ·Éê·Éì·Éî·Éó ·Éë·Éù·Éú·É£·É°·Éò·Éó",
                footer_description: "·Éõ·Éê·É†·É¢·Éò·Éï·Éê·Éì ·É®·Éî·É£·Éô·Éï·Éî·Éó·Éî·Éó ·ÉÆ·Éõ·Éù·Éï·Éê·Éú·Éò ·Éë·É†·É´·Éê·Éú·Éî·Éë·Éî·Éë·Éò·Éó. ·É°·É¨·É†·Éê·É§·Éò, ·É£·É°·Éê·É§·É†·Éó·ÉÆ·Éù ·Éì·Éê ·Éû·É†·Éê·É•·É¢·Éò·Éô·É£·Éö·Éò ·É®·Éù·Éû·Éò·Éú·Éí·Éò·É° ·Éí·Éê·Éõ·Éù·É™·Éì·Éò·Éö·Éî·Éë·Éê.",
                quick_links: "·É°·É¨·É†·Éê·É§·Éò ·Éë·Éõ·É£·Éö·Éî·Éë·Éò",
                referral_link: "·É†·Éî·É§·Éî·É†·Éê·Éö·É£·É†·Éò ·Éë·Éõ·É£·Éö·Éò",
                whatsapp_order: "·É®·Éî·É£·Éô·Éï·Éî·Éó·Éî·Éó WhatsApp-·Éò·Éó",
                my_orders: "·É©·Éî·Éõ·Éò ·É®·Éî·Éô·Éï·Éî·Éó·Éî·Éë·Éò",
                help: "·Éì·Éê·ÉÆ·Éõ·Éê·É†·Éî·Éë·Éê",
                contact: "·Éô·Éù·Éú·É¢·Éê·É•·É¢·Éò",
                location: "·Éó·Éë·Éò·Éö·Éò·É°·Éò, ·É°·Éê·É•·Éê·É†·Éó·Éï·Éî·Éö·Éù",
                partner_login: "·Éû·Éê·É†·É¢·Éú·Éò·Éù·É†·Éò·É° ·É®·Éî·É°·Éï·Éö·Éê",
                all_rights_reserved: "·Éß·Éï·Éî·Éö·Éê ·É£·É§·Éö·Éî·Éë·Éê ·Éì·Éê·É™·É£·Éö·Éò·Éê.",
                voice_assistant: "·ÉÆ·Éõ·Éù·Éï·Éê·Éú·Éò ·Éê·É°·Éò·É°·É¢·Éî·Éú·É¢·Éò",
                welcome_message: "·Éí·Éê·Éõ·Éê·É†·ÉØ·Éù·Éë·Éê! ·É©·Éê·É†·Éó·Éî·Éó ·Éõ·Éò·Éô·É†·Éù·É§·Éù·Éú·Éò ·É®·Éî·Éô·Éï·Éî·Éó·Éò·É° ·Éí·Éê·Éú·É°·Éê·ÉÆ·Éù·É†·É™·Éò·Éî·Éö·Éî·Éë·Éö·Éê·Éì ·Éì·Éê ·Éì·Éê·Éò·É¨·Éß·Éî·Éó ·É°·Éê·É£·Éë·Éê·É†·Éò.",
                location_description: "·Éí·Éó·ÉÆ·Éù·Éï·Éó, ·Éê·Éò·É†·É©·Éò·Éù·Éó ·Éõ·Éì·Éî·Éë·Éê·É†·Éî·Éù·Éë·Éê, ·É°·Éê·Éì·Éê·É™ ·Éí·É°·É£·É†·Éó ·É®·Éî·Éô·Éï·Éî·Éó·Éò·É° ·Éí·Éê·Éú·Éó·Éê·Éï·É°·Éî·Éë·Éê:"
            },
            ru: {
                app_name: "–ì–æ–ª–æ—Å–æ–≤–æ–π –ó–∞–∫–∞–∑",
                select_location: "–í—ã–±–µ—Ä–∏—Ç–µ –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ",
                order: "–ó–∞–∫–∞–∑:",
                profile: "–ú–æ–π –ü—Ä–æ—Ñ–∏–ª—å",
                microphone_off: "–ú–∏–∫—Ä–æ—Ñ–æ–Ω (–í—ã–∫–ª—é—á–µ–Ω)",
                banner_title: "–õ–µ–≥–∫–∏–π –®–æ–ø–ø–∏–Ω–≥ —Å –ì–æ–ª–æ—Å–æ–≤—ã–º –ó–∞–∫–∞–∑–æ–º",
                banner_description: "–ü—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç–µ, –≤–∞—à –∑–∞–∫–∞–∑ —É –≤–∞—à–µ–π –¥–≤–µ—Ä–∏!",
                detect_location: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ú–æ–µ –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ",
                what_to_eat: "–ß—Ç–æ –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ –ø–æ–µ—Å—Ç—å?",
                nearest_places: "–ë–ª–∏–∂–∞–π—à–∏–µ –ú–µ—Å—Ç–∞ –∫ –í–∞–º",
                categories: "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏",
                products: "–ü—Ä–æ–¥—É–∫—Ç—ã",
                inside_restaurant: "–í–Ω—É—Ç—Ä–∏ –†–µ—Å—Ç–æ—Ä–∞–Ω–∞",
                inside_description: "–ü–æ–µ—à—å—Ç–µ –≤–∞—à—É –µ–¥—É –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ",
                takeaway: "–ù–∞ –í—ã–Ω–æ—Å",
                takeaway_description: "–ó–∞–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –µ–¥—É —Å–∞–º–∏",
                delivery: "–î–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –î–æ–º",
                delivery_description: "–í–∞—à–∞ –µ–¥–∞ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø–æ –≤–∞—à–µ–º—É –∞–¥—Ä–µ—Å—É",
                auto_detect: "–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ú–æ–µ–≥–æ –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è",
                your_cart: "–í–∞—à–∞ –ö–æ—Ä–∑–∏–Ω–∞",
                empty_cart: "–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞",
                subtotal: "–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∏—Ç–æ–≥:",
                discount: "–°–∫–∏–¥–∫–∞:",
                vat: "–ù–î–° (%18):",
                total: "–í—Å–µ–≥–æ:",
                pay_cash: "–û–ø–ª–∞—Ç–∏—Ç—å –ù–∞–ª–∏—á–Ω—ã–º–∏",
                pay_card: "–û–ø–ª–∞—Ç–∏—Ç—å –ö–∞—Ä—Ç–æ–π",
                pay_bonus: "–û–ø–ª–∞—Ç–∏—Ç—å –ë–æ–Ω—É—Å–∞–º–∏",
                footer_description: "–õ–µ–≥–∫–æ –∑–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å –ø–æ–º–æ—â—å—é –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥. –ë—ã—Å—Ç—Ä—ã–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –æ–ø—ã—Ç –ø–æ–∫—É–ø–æ–∫.",
                quick_links: "–ë—ã—Å—Ç—Ä—ã–µ –°—Å—ã–ª–∫–∏",
                referral_link: "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –°—Å—ã–ª–∫–∞",
                whatsapp_order: "–ó–∞–∫–∞–∑ —á–µ—Ä–µ–∑ WhatsApp",
                my_orders: "–ú–æ–∏ –ó–∞–∫–∞–∑—ã",
                help: "–ü–æ–º–æ—â—å",
                contact: "–ö–æ–Ω—Ç–∞–∫—Ç",
                location: "–°—Ç–∞–º–±—É–ª, –¢—É—Ä—Ü–∏—è",
                partner_login: "–í—Ö–æ–¥ –¥–ª—è –ü–∞—Ä—Ç–Ω–µ—Ä–æ–≤",
                all_rights_reserved: "–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.",
                voice_assistant: "–ì–æ–ª–æ—Å–æ–≤–æ–π –ü–æ–º–æ—â–Ω–∏–∫",
                welcome_message: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í–∫–ª—é—á–∏—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑, –∏ –Ω–∞—á–∏–Ω–∞–π—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—å.",
                location_description: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –≥–¥–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –∑–∞–∫–∞–∑:"
            },
            az: {
                app_name: "S…ôsli Sifari≈ü",
                select_location: "Yeri Se√ßin",
                order: "Sifari≈ü:",
                profile: "Profilim",
                microphone_off: "Mikrofon (S√∂nd√ºr√ºlm√º≈ü)",
                banner_title: "S…ôsli Sifari≈ü il…ô Asan Alƒ±≈ü-veri≈ü",
                banner_description: "Sad…ôc…ô danƒ±≈üƒ±n, sifari≈üiniz qapƒ±nƒ±zda!",
                detect_location: "M…ônim Yerimi M√º…ôyy…ônl…ô≈üdir",
                what_to_eat: "N…ô yem…ôk ist…ôyirsiniz?",
                nearest_places: "Siz…ô ∆èn Yaxƒ±n Yerl…ôr",
                categories: "Kateqoriyalar",
                products: "M…ôhsullar",
                inside_restaurant: "Restoran Daxilind…ô",
                inside_description: "Yem…ôyinizi restoranda yeyin",
                takeaway: "Paket Xidm…ôti",
                takeaway_description: "Yem…ôyinizi √∂z√ºn√ºz g√∂t√ºr√ºn",
                delivery: "√únvana √áatdƒ±rƒ±lma",
                delivery_description: "Yem…ôyiniz √ºnvanƒ±nƒ±za √ßatdƒ±rƒ±lsƒ±n",
                auto_detect: "Yerimi Avtomatik M√º…ôyy…ônl…ô≈üdir",
                your_cart: "S…ôb…ôtiniz",
                empty_cart: "S…ôb…ôtiniz bo≈üdur",
                subtotal: "Ara C…ômi:",
                discount: "Endirim:",
                vat: "∆èDV (%18):",
                total: "√úmumi:",
                pay_cash: "Naƒüd √ñd…ô",
                pay_card: "Kartla √ñd…ô",
                pay_bonus: "Bonusla √ñd…ô",
                footer_description: "S…ôsli …ômrl…ôrl…ô asanlƒ±qla sifari≈ü verin. S√ºr…ôtli, t…ôhl√ºk…ôsiz v…ô praktik alƒ±≈ü-veri≈ü t…ôcr√ºb…ôsi.",
                quick_links: "S√ºr…ôtli Ke√ßidl…ôr",
                referral_link: "Referans Linki",
                whatsapp_order: "WhatsApp il…ô Sifari≈ü",
                my_orders: "Sifari≈ül…ôrim",
                help: "Yardƒ±m",
                contact: "∆èlaq…ô",
                location: "ƒ∞stanbul, T√ºrkiy…ô",
                partner_login: "Partner Giri≈üi",
                all_rights_reserved: "B√ºt√ºn h√ºquqlar qorunur.",
                voice_assistant: "S…ôsli K√∂m…ôk√ßi",
                welcome_message: "Salam! Sifari≈ü verm…ôk √º√ß√ºn mikrofonu a√ßƒ±n v…ô danƒ±≈ümaƒüa ba≈ülayƒ±n.",
                location_description: "Z…ôhm…ôt olmasa sifari≈ü verm…ôk ist…ôdiyiniz yeri se√ßin:"
            },
            de: {
                app_name: "Sprachbestellung",
                select_location: "Standort ausw√§hlen",
                order: "Bestellung:",
                profile: "Mein Profil",
                microphone_off: "Mikrofon (Aus)",
                banner_title: "Einfaches Einkaufen mit Sprachbestellung",
                banner_description: "Einfach sprechen, Ihre Bestellung ist vor Ihrer T√ºr!",
                detect_location: "Meinen Standort ermitteln",
                what_to_eat: "Was m√∂chten Sie essen?",
                nearest_places: "N√§chste Orte zu Ihnen",
                categories: "Kategorien",
                products: "Produkte",
                inside_restaurant: "Im Restaurant",
                inside_description: "Essen Sie Ihre Mahlzeit im Restaurant",
                takeaway: "Takeaway",
                takeaway_description: "Holen Sie Ihre Mahlzeit selbst ab",
                delivery: "Lieferung nach Hause",
                delivery_description: "Ihre Mahlzeit wird zu Ihrer Adresse geliefert",
                auto_detect: "Automatische Standortermittlung",
                your_cart: "Ihr Warenkorb",
                empty_cart: "Ihr Warenkorb ist leer",
                subtotal: "Zwischensumme:",
                discount: "Rabatt:",
                vat: "MwSt (%18):",
                total: "Gesamt:",
                pay_cash: "Bar bezahlen",
                pay_card: "Mit Karte bezahlen",
                pay_bonus: "Mit Bonus bezahlen",
                footer_description: "Bestellen Sie einfach mit Sprachbefehlen. Schnelles, sicheres und praktisches Einkaufserlebnis.",
                quick_links: "Schnelllinks",
                referral_link: "Empfehlungslink",
                whatsapp_order: "Bestellung per WhatsApp",
                my_orders: "Meine Bestellungen",
                help: "Hilfe",
                contact: "Kontakt",
                location: "Istanbul, T√ºrkei",
                partner_login: "Partner-Login",
                all_rights_reserved: "Alle Rechte vorbehalten.",
                voice_assistant: "Sprachassistent",
                welcome_message: "Hallo! Schalten Sie das Mikrofon ein, um eine Bestellung aufzugeben, und beginnen Sie zu sprechen.",
                location_description: "Bitte w√§hlen Sie den Standort aus, an dem Sie Ihre Bestellung aufgeben m√∂chten:"
            },
            it: {
                app_name: "Ordine Vocale",
                select_location: "Seleziona Posizione",
                order: "Ordine:",
                profile: "Mio Profilo",
                microphone_off: "Microfono (Spento)",
                banner_title: "Shopping Facile con Ordine Vocale",
                banner_description: "Parla e basta, il tuo ordine √® alla tua porta!",
                detect_location: "Rileva la Mia Posizione",
                what_to_eat: "Cosa vorresti mangiare?",
                nearest_places: "Luoghi Pi√π Vicini a Te",
                categories: "Categorie",
                products: "Prodotti",
                inside_restaurant: "All'interno del Ristorante",
                inside_description: "Mangia il tuo pasto al ristorante",
                takeaway: "Takeaway",
                takeaway_description: "Ritira tu stesso il tuo pasto",
                delivery: "Consegna a Domicilio",
                delivery_description: "Il tuo pasto consegnato al tuo indirizzo",
                auto_detect: "Rilevamento Automatico della Mia Posizione",
                your_cart: "Il Tuo Carrello",
                empty_cart: "Il tuo carrello √® vuoto",
                subtotal: "Subtotale:",
                discount: "Sconto:",
                vat: "IVA (%18):",
                total: "Totale:",
                pay_cash: "Paga in Contanti",
                pay_card: "Paga con Carta",
                pay_bonus: "Paga con Bonus",
                footer_description: "Ordina facilmente con comandi vocali. Esperienza di shopping veloce, sicura e pratica.",
                quick_links: "Link Rapidi",
                referral_link: "Link di Referral",
                whatsapp_order: "Ordina tramite WhatsApp",
                my_orders: "I Miei Ordini",
                help: "Aiuto",
                contact: "Contatto",
                location: "Istanbul, Turchia",
                partner_login: "Accesso Partner",
                all_rights_reserved: "Tutti i diritti riservati.",
                voice_assistant: "Assistente Vocale",
                welcome_message: "Ciao! Accendi il microfono per effettuare un ordine e inizia a parlare.",
                location_description: "Seleziona la posizione in cui desideri effettuare l'ordine:"
            }
        };
        
        const languages = [
            { code: 'tr', name: 'T√ºrk√ße', flag: 'üáπüá∑' },
            { code: 'en', name: 'English', flag: 'üá∫üá∏' },
            { code: 'ge', name: '·É•·Éê·É†·Éó·É£·Éö·Éò', flag: 'üá¨üá™' },
            { code: 'ru', name: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫' },
            { code: 'az', name: 'Az…ôrbaycanca', flag: 'üá¶üáø' },
            { code: 'de', name: 'Deutsch', flag: 'üá©üá™' },
            { code: 'it', name: 'Italiano', flag: 'üáÆüáπ' }
        ];
        
        let currentLanguage = 'tr';
        
        // Tarayƒ±cƒ± dilini algƒ±la
        function detectBrowserLanguage() {
            const browserLang = navigator.language || navigator.userLanguage;
            const langCode = browserLang.split('-')[0];
            
            // Desteklenen dillerden birini bul
            const supportedLang = languages.find(lang => lang.code === langCode);
            if (supportedLang) {
                return supportedLang.code;
            }
            
            return 'tr'; // Varsayƒ±lan dil
        }
        
        // Dil se√ßeneklerini olu≈ütur
        function populateLanguageOptions() {
            const dropdown = document.getElementById('languageDropdown');
            dropdown.innerHTML = '';
            
            languages.forEach(lang => {
                const option = document.createElement('div');
                option.className = `language-option ${lang.code === currentLanguage ? 'active' : ''}`;
                option.setAttribute('data-lang', lang.code);
                
                option.innerHTML = `
                    <span class="flag">${lang.flag}</span>
                    <span>${lang.name}</span>
                    ${lang.code === currentLanguage ? '<i class="fas fa-check"></i>' : ''}
                `;
                
                dropdown.appendChild(option);
            });
        }
        
        // Sayfayƒ± √ßevir
        function translatePage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translations[lang][key];
                    } else {
                        element.textContent = translations[lang][key];
                    }
                }
            });
            
            // Dil d√ºƒümesini g√ºncelle
            const currentLang = languages.find(l => l.code === lang);
            document.getElementById('currentLanguage').textContent = currentLang.flag;
            
            // Sesli asistan dilini g√ºncelle
            if (recognition) {
                recognition.lang = getSpeechRecognitionLang(lang);
            }
            
            // Dil se√ßeneklerini g√ºncelle
            populateLanguageOptions();
            
            // Banner'ƒ± g√ºncelle
            updateBanner(currentStoreType);
        }
        
        // Konu≈üma tanƒ±ma dili
        function getSpeechRecognitionLang(lang) {
            const langMap = {
                'tr': 'tr-TR',
                'en': 'en-US',
                'ge': 'ka-GE',
                'ru': 'ru-RU',
                'az': 'az-AZ',
                'de': 'de-DE',
                'it': 'it-IT'
            };
            
            return langMap[lang] || 'tr-TR';
        }
        
        // =============================================
        // Dƒ∞NAMƒ∞K BANNER Sƒ∞STEMƒ∞
        // =============================================
        
        const bannerVideos = {
            market: "https://assets.mixkit.co/videos/preview/mixkit-people-shopping-in-a-supermarket-43244-large.mp4",
            restaurant: "https://assets.mixkit.co/videos/preview/mixkit-cooking-a-meal-in-a-restaurant-kitchen-43239-large.mp4",
            bakery: "https://assets.mixkit.co/videos/preview/mixkit-baker-preparing-bread-in-a-traditional-oven-43237-large.mp4",
            pharmacy: "https://assets.mixkit.co/videos/preview/mixkit-pharmacist-preparing-medicine-in-a-pharmacy-43236-large.mp4"
        };
        
        const bannerTitles = {
            tr: {
                market: "Market Alƒ±≈üveri≈üini Sesinle Yap",
                restaurant: "Lezzetli Yemekler Sesinle Kapƒ±nda",
                bakery: "Taze Fƒ±rƒ±n √úr√ºnleri Sesinle Gelsin",
                pharmacy: "ƒ∞la√ßlarƒ±n Sesinle Kapƒ±nda"
            },
            en: {
                market: "Do Your Grocery Shopping with Your Voice",
                restaurant: "Delicious Food at Your Door with Your Voice",
                bakery: "Fresh Bakery Products with Your Voice",
                pharmacy: "Your Medications at Your Door with Your Voice"
            },
            ge: {
                market: "·Éí·Éê·Éõ·Éù·Éò·Éß·Éî·Éú·Éî·Éó ·Éó·É•·Éï·Éî·Éú·Éò ·ÉÆ·Éõ·Éê ·É°·Éê·É°·É£·É†·É°·Éê·Éó·Éù ·É®·Éù·Éû·Éò·Éú·Éí·Éò·É°·Éó·Éï·Éò·É°",
                restaurant: "·Éí·Éî·Éõ·É†·Éò·Éî·Éö·Éò ·É°·Éê·É≠·Éõ·Éî·Éö·Éò ·Éó·É•·Éï·Éî·Éú·É° ·Éô·Éê·É†·Éñ·Éî ·Éó·É•·Éï·Éî·Éú·Éò ·ÉÆ·Éõ·Éò·Éó",
                bakery: "·Éê·ÉÆ·Éê·Éö·Éò ·É°·Éê·É™·ÉÆ·Éù·Éë·Éò ·Éû·É†·Éù·Éì·É£·É•·É¢·Éî·Éë·Éò ·Éó·É•·Éï·Éî·Éú·Éò ·ÉÆ·Éõ·Éò·Éó",
                pharmacy: "·Éó·É•·Éï·Éî·Éú·Éò ·Éõ·Éî·Éì·Éò·Éô·Éê·Éõ·Éî·Éú·É¢·Éî·Éë·Éò ·Éó·É•·Éï·Éî·Éú·É° ·Éô·Éê·É†·Éñ·Éî ·Éó·É•·Éï·Éî·Éú·Éò ·ÉÆ·Éõ·Éò·Éó"
            },
            ru: {
                market: "–î–µ–ª–∞–π—Ç–µ –ø–æ–∫—É–ø–∫–∏ –≤ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–µ —Å –ø–æ–º–æ—â—å—é —Å–≤–æ–µ–≥–æ –≥–æ–ª–æ—Å–∞",
                restaurant: "–í–∫—É—Å–Ω–∞—è –µ–¥–∞ —É –≤–∞—à–µ–π –¥–≤–µ—Ä–∏ —Å –≤–∞—à–∏–º –≥–æ–ª–æ—Å–æ–º",
                bakery: "–°–≤–µ–∂–∞—è –≤—ã–ø–µ—á–∫–∞ —Å –≤–∞—à–∏–º –≥–æ–ª–æ—Å–æ–º",
                pharmacy: "–í–∞—à–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ —É –≤–∞—à–µ–π –¥–≤–µ—Ä–∏ —Å –≤–∞—à–∏–º –≥–æ–ª–æ—Å–æ–º"
            },
            az: {
                market: "Market Alƒ±≈ü-veri≈üini S…ôsinl…ô Et",
                restaurant: "L…ôzz…ôtli Yem…ôkl…ôr S…ôsinl…ô Qapƒ±nda",
                bakery: "T…ôz…ô Fƒ±rƒ±n M…ôhsullarƒ± S…ôsinl…ô G…ôlsin",
                pharmacy: "D…ôrmanlarƒ±n S…ôsinl…ô Qapƒ±nda"
            },
            de: {
                market: "Machen Sie Ihren Lebensmitteleinkauf mit Ihrer Stimme",
                restaurant: "Leckeres Essen an Ihrer T√ºr mit Ihrer Stimme",
                bakery: "Frische Backwaren mit Ihrer Stimme",
                pharmacy: "Ihre Medikamente an Ihrer T√ºr mit Ihrer Stimme"
            },
            it: {
                market: "Fai la tua spesa alimentare con la tua voce",
                restaurant: "Cibo delizioso alla tua porta con la tua voce",
                bakery: "Prodotti da forno freschi con la tua voce",
                pharmacy: "I tuoi farmaci alla tua porta con la tua voce"
            }
        };
        
        const bannerDescriptions = {
            tr: {
                market: "Market √ºr√ºnlerini sesinle sipari≈ü et, kapƒ±na gelsin!",
                restaurant: "Restoran lezzetlerini sesinle ke≈üfet!",
                bakery: "Taze ekmek ve pastane √ºr√ºnleri sesinle kapƒ±nda!",
                pharmacy: "ƒ∞la√ßlarƒ±nƒ± sesinle sipari≈ü et, zaman kazan!"
            },
            en: {
                market: "Order grocery products with your voice, delivered to your door!",
                restaurant: "Discover restaurant flavors with your voice!",
                bakery: "Fresh bread and bakery products with your voice at your door!",
                pharmacy: "Order your medications with your voice, save time!"
            },
            ge: {
                market: "·É®·Éî·É£·Éô·Éï·Éî·Éó·Éî·Éó ·É°·Éê·É°·É£·É†·É°·Éê·Éó·Éù ·Éû·É†·Éù·Éì·É£·É•·É¢·Éî·Éë·Éò ·Éó·É•·Éï·Éî·Éú·Éò ·ÉÆ·Éõ·Éò·Éó, ·Éõ·Éò·Éò·É¢·Éê·Éú·Éî·Éó ·Éó·É•·Éï·Éî·Éú·É° ·Éô·Éê·É†·Éñ·Éî!",
                restaurant: "·Éê·É¶·Éõ·Éù·Éê·É©·Éò·Éú·Éî·Éó ·É†·Éî·É°·É¢·Éù·É†·Éú·Éò·É° ·Éí·Éî·Éõ·Éù·Éî·Éë·Éò ·Éó·É•·Éï·Éî·Éú·Éò ·ÉÆ·Éõ·Éò·Éó!",
                bakery: "·Éê·ÉÆ·Éê·Éö·Éò ·Éû·É£·É†·Éò ·Éì·Éê ·É°·Éê·É™·ÉÆ·Éù·Éë·Éò ·Éû·É†·Éù·Éì·É£·É•·É¢·Éî·Éë·Éò ·Éó·É•·Éï·Éî·Éú·Éò ·ÉÆ·Éõ·Éò·Éó ·Éó·É•·Éï·Éî·Éú·É° ·Éô·Éê·É†·Éñ·Éî!",
                pharmacy: "·É®·Éî·É£·Éô·Éï·Éî·Éó·Éî·Éó ·Éó·É•·Éï·Éî·Éú·Éò ·Éõ·Éî·Éì·Éò·Éô·Éê·Éõ·Éî·Éú·É¢·Éî·Éë·Éò ·Éó·É•·Éï·Éî·Éú·Éò ·ÉÆ·Éõ·Éò·Éó, ·Éì·Éê·Éñ·Éù·Éí·Éî·Éó ·Éì·É†·Éù!"
            },
            ru: {
                market: "–ó–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Å –ø–æ–º–æ—â—å—é —Å–≤–æ–µ–≥–æ –≥–æ–ª–æ—Å–∞, –¥–æ—Å—Ç–∞–≤–∫–∞ –∫ –≤–∞—à–µ–π –¥–≤–µ—Ä–∏!",
                restaurant: "–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –≤–∫—É—Å—ã —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ —Å –≤–∞—à–∏–º –≥–æ–ª–æ—Å–æ–º!",
                bakery: "–°–≤–µ–∂–∏–π —Ö–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞ —Å –≤–∞—à–∏–º –≥–æ–ª–æ—Å–æ–º —É –≤–∞—à–µ–π –¥–≤–µ—Ä–∏!",
                pharmacy: "–ó–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–≤–æ–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ —Å –≤–∞—à–∏–º –≥–æ–ª–æ—Å–æ–º, —ç–∫–æ–Ω–æ–º—å—Ç–µ –≤—Ä–µ–º—è!"
            },
            az: {
                market: "Market m…ôhsullarƒ±nƒ± s…ôsinl…ô sifari≈ü et, qapƒ±na g…ôlsin!",
                restaurant: "Restoran l…ôzz…ôtl…ôrini s…ôsinl…ô k…ô≈üf et!",
                bakery: "T…ôz…ô √ß√∂r…ôk v…ô pastaxana m…ôhsullarƒ± s…ôsinl…ô qapƒ±nda!",
                pharmacy: "D…ôrmanlarƒ±nƒ± s…ôsinl…ô sifari≈ü et, vaxt qazan!"
            },
            de: {
                market: "Bestellen Sie Lebensmittel mit Ihrer Stimme, liefern Sie an Ihre T√ºr!",
                restaurant: "Entdecken Sie Restaurantaromen mit Ihrer Stimme!",
                bakery: "Frisches Brot und Backwaren mit Ihrer Stimme an Ihrer T√ºr!",
                pharmacy: "Bestellen Sie Ihre Medikamente mit Ihrer Stimme, sparen Sie Zeit!"
            },
            it: {
                market: "Ordina prodotti alimentari con la tua voce, consegnati alla tua porta!",
                restaurant: "Scopri i sapori del ristorante con la tua voce!",
                bakery: "Pane fresco e prodotti da forno con la tua voce alla tua porta!",
                pharmacy: "Ordina i tuoi farmaci con la tua voce, risparmia tempo!"
            }
        };
        
        let currentStoreType = 'market';
        
        function updateBanner(storeType) {
            const banner = document.getElementById('banner');
            const bannerVideo = document.getElementById('bannerVideo');
            const bannerTitle = document.getElementById('bannerTitle');
            const bannerDescription = document.getElementById('bannerDescription');
            
            // Varsayƒ±lan deƒüerler
            let videoSrc = bannerVideos.market;
            let title = bannerTitles[currentLanguage].market;
            let description = bannerDescriptions[currentLanguage].market;
            
            // Store type'a g√∂re i√ßerikleri belirle
            if (storeType && bannerVideos[storeType]) {
                videoSrc = bannerVideos[storeType];
                title = bannerTitles[currentLanguage][storeType];
                description = bannerDescriptions[currentLanguage][storeType];
                currentStoreType = storeType;
            }
            
            // Banner'ƒ± g√ºncelle
            bannerVideo.src = videoSrc;
            bannerVideo.load();
            bannerVideo.play().catch(e => console.log("Video autoplay prevented:", e));
            
            bannerTitle.textContent = title;
            bannerDescription.textContent = description;
        }
        
        // =============================================
        // YATAY KAYDIRMA FONKSƒ∞YONLARI
        // =============================================
        
        function setupHorizontalScrolling() {
            
            // Sellers kaydƒ±rma
            document.getElementById('scrollSellersLeft').addEventListener('click', () => {
                document.getElementById('sellerGrid').scrollBy({ left: -200, behavior: 'smooth' });
            });
            
            document.getElementById('scrollSellersRight').addEventListener('click', () => {
                document.getElementById('sellerGrid').scrollBy({ left: 200, behavior: 'smooth' });
            });
            
            // Categories kaydƒ±rma
            document.getElementById('scrollCategoriesLeft').addEventListener('click', () => {
                document.getElementById('categoriesGrid').scrollBy({ left: -200, behavior: 'smooth' });
            });
            
            document.getElementById('scrollCategoriesRight').addEventListener('click', () => {
                document.getElementById('categoriesGrid').scrollBy({ left: 200, behavior: 'smooth' });
            });
            
            // Products kaydƒ±rma
            document.getElementById('scrollProductsLeft').addEventListener('click', () => {
                document.getElementById('productsGrid').scrollBy({ left: -200, behavior: 'smooth' });
            });
            
            document.getElementById('scrollProductsRight').addEventListener('click', () => {
                document.getElementById('productsGrid').scrollBy({ left: 200, behavior: 'smooth' });
            });
        }
        
        // =============================================
        // √ñRNEK VERƒ∞ Y√úKLEME
        // =============================================
        
        function loadSampleData() {
            // Store types
            const storeTypesx = [
                { id: 1, name: 'Market', type: 'market', icon: 'fas fa-store' },
                { id: 2, name: 'Restoran', type: 'restaurant', icon: 'fas fa-utensils' },
                { id: 3, name: 'Fƒ±rƒ±n', type: 'bakery', icon: 'fas fa-bread-slice' },
                { id: 4, name: 'Eczane', type: 'pharmacy', icon: 'fas fa-prescription-bottle' },
                { id: 5, name: 'Kafe', type: 'cafe', icon: 'fas fa-coffee' },
                { id: 6, name: 'Fast Food', type: 'fastfood', icon: 'fas fa-hamburger' }
            ];
            
            const sellerTypeGrid = document.getElementById('sellerTypeGrid');
            storeTypes.forEach(store => {
                const card = document.createElement('div');
                card.className = 'store-type-card';
                card.setAttribute('data-store-type', store.type);
                
                card.innerHTML = `
                    <div class="store-type-icon">
                        <i class="${store.icon}"></i>
                    </div>
                    <div class="store-type-name">${store.name}</div>
                `;
                
                card.addEventListener('click', function() {
                    // T√ºm kartlardan se√ßimi kaldƒ±r
                    document.querySelectorAll('.store-type-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    
                    // Bu kartƒ± se√ßili yap
                    this.classList.add('selected');
                    
                    // Banner'ƒ± g√ºncelle
                    updateBanner(store.type);
                    
                    // Satƒ±cƒ±larƒ± g√∂ster
                    document.getElementById('sellersSection').style.display = 'block';
                    loadSampleSellers();
                });
                
                storeTypeGrid.appendChild(card);
            });
        }
        
        function loadSampleSellers() {
            const sellers = [
                { 
                    id: 1, 
                    name: '√ñrnek Market', 
                    image: 'https://images.unsplash.com/photo-1604719312566-8912e221a99f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                    rating: 4.5,
                    deliveryFee: 5.99,
                    minOrder: 50,
                    freeDelivery: false
                },
                { 
                    id: 2, 
                    name: 'Lezzet Restoran', 
                    image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                    rating: 4.8,
                    deliveryFee: 0,
                    minOrder: 75,
                    freeDelivery: true
                },
                { 
                    id: 3, 
                    name: 'Taze Fƒ±rƒ±n', 
                    image: 'https://images.unsplash.com/photo-1509440159596-0249088772ff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
                    rating: 4.7,
                    deliveryFee: 3.99,
                    minOrder: 25,
                    freeDelivery: false
                }
            ];
            
            const sellerGrid = document.getElementById('sellerGrid');
            sellerGrid.innerHTML = '';
            
            sellers.forEach(seller => {
                const card = document.createElement('div');
                card.className = 'seller-card';
                
                card.innerHTML = `
                    <img src="${seller.image}" alt="${seller.name}" class="seller-image">
                    <div class="seller-info">
                        <div class="seller-name">${seller.name}</div>
                        <div class="seller-details">
                            <span><i class="fas fa-map-marker-alt"></i> 1.2 km</span>
                            <span class="seller-rating">
                                <i class="fas fa-star"></i>
                                ${seller.rating}
                            </span>
                        </div>
                        <div class="delivery-info">
                            <div class="delivery-fee ${seller.freeDelivery ? 'free' : ''}">
                                <i class="fas fa-motorcycle"></i>
                                ${seller.freeDelivery ? '√úcretsiz Teslimat' : `Teslimat: ${seller.deliveryFee} ‚Ç∫`}
                            </div>
                            ${seller.minOrder ? `<div class="min-order">Min. Sipari≈ü: ${seller.minOrder} ‚Ç∫</div>` : ''}
                        </div>
                    </div>
                `;
                
                card.addEventListener('click', function() {
                    // Kategorileri g√∂ster
                    document.getElementById('categoriesSection').style.display = 'block';
                    loadSampleCategories();
                    
                    // Satƒ±cƒ± bilgisini g√ºncelle
                    document.getElementById('selectedSellerInfo').textContent = seller.name;
                });
                
                sellerGrid.appendChild(card);
            });
        }
        
        function loadSampleCategories() {
            const categories = [
                { id: 1, name: 'Meyve & Sebze', icon: 'fas fa-apple-alt' },
                { id: 2, name: 'S√ºt √úr√ºnleri', icon: 'fas fa-cheese' },
                { id: 3, name: 'Et & Tavuk', icon: 'fas fa-drumstick-bite' },
                { id: 4, name: 'Temel Gƒ±da', icon: 'fas fa-wheat-alt' },
                { id: 5, name: 'ƒ∞√ßecekler', icon: 'fas fa-wine-bottle' },
                { id: 6, name: 'Atƒ±≈ütƒ±rmalƒ±k', icon: 'fas fa-cookie' }
            ];
            
            const categoriesGrid = document.getElementById('categoriesGrid');
            categoriesGrid.innerHTML = '';
            
            categories.forEach(category => {
                const card = document.createElement('div');
                card.className = 'category-card';
                
                card.innerHTML = `
                    <div class="category-icon">
                        <i class="${category.icon}"></i>
                    </div>
                    <div class="category-name">${category.name}</div>
                `;
                
                card.addEventListener('click', function() {
                    // √úr√ºnleri g√∂ster
                    document.getElementById('productsSection').style.display = 'block';
                    loadSampleProducts();
                });
                
                categoriesGrid.appendChild(card);
            });
        }
        
        function loadSampleProducts() {
            const products = [
                { 
                    id: 1, 
                    name: 'S√ºt 1L', 
                    image: 'https://images.unsplash.com/photo-1563636619-e9143da7973b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                    price: 15.90,
                    discountPrice: 12.90,
                    hasDiscount: true
                },
                { 
                    id: 2, 
                    name: 'Ekmek', 
                    image: 'https://images.unsplash.com/photo-1549931319-a545dcf3bc73?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                    price: 5.50,
                    discountPrice: null,
                    hasDiscount: false
                },
                { 
                    id: 3, 
                    name: 'Yumurta 10\'lu', 
                    image: 'https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                    price: 32.00,
                    discountPrice: 28.00,
                    hasDiscount: true
                },
                { 
                    id: 4, 
                    name: 'Peynir 500g', 
                    image: 'https://images.unsplash.com/photo-1552767059-ce182ead6c1b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                    price: 45.00,
                    discountPrice: null,
                    hasDiscount: false
                },
                { 
                    id: 5, 
                    name: 'Domates 1kg', 
                    image: 'https://images.unsplash.com/photo-1592924357228-91a4daadcfea?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80',
                    price: 18.00,
                    discountPrice: 15.00,
                    hasDiscount: true
                }
            ];
            
            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = '';
            
            products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                
                card.innerHTML = `
                    ${product.hasDiscount ? '<div class="product-badge">ƒ∞ndirim</div>' : ''}
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">
                            ${product.hasDiscount ? `
                                <span>${product.discountPrice} ‚Ç∫</span>
                                <span class="product-discount">${product.price} ‚Ç∫</span>
                            ` : `
                                <span>${product.price} ‚Ç∫</span>
                            `}
                        </div>
                        <button class="add-to-cart-btn" data-translate="add_to_cart">Sepete Ekle</button>
                    </div>
                `;
                
                productsGrid.appendChild(card);
            });
        }
        
        // =============================================
        // UYGULAMA BA≈ûLATMA
        // =============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            // Dil se√ßeneklerini olu≈ütur
            populateLanguageOptions();
            
            // Tarayƒ±cƒ± dilini algƒ±la ve √ßevir
            const browserLang = detectBrowserLanguage();
            translatePage(browserLang);
            
            // Varsayƒ±lan banner'ƒ± y√ºkle
            updateBanner('market');
            
            // Yatay kaydƒ±rma ayarlarƒ±nƒ± yap
            setupHorizontalScrolling();
            
            // √ñrnek verileri y√ºkle
            loadSampleData();
            
            // Dil deƒüi≈ütirme event'leri
            document.getElementById('languageBtn').addEventListener('click', function() {
                document.getElementById('languageDropdown').classList.toggle('show');
            });
            
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.language-selector')) {
                    document.getElementById('languageDropdown').classList.remove('show');
                }
                
                if (e.target.closest('.language-option')) {
                    const lang = e.target.closest('.language-option').getAttribute('data-lang');
                    translatePage(lang);
                    document.getElementById('languageDropdown').classList.remove('show');
                }
            });
            
            // Banner konum butonu
            document.getElementById('bannerLocationBtn').addEventListener('click', function() {
                showLocationModal();
            });
            
            // Konum modalƒ± event'leri
            document.getElementById('closeLocationModal').addEventListener('click', hideLocationModal);
            
            document.querySelectorAll('.location-option').forEach(option => {
                option.addEventListener('click', function() {
                    // T√ºm se√ßeneklerden se√ßimi kaldƒ±r
                    document.querySelectorAll('.location-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Bu se√ßeneƒüi se√ßili yap
                    this.classList.add('selected');
                    
                    // Konum t√ºr√ºn√º se√ß
                    const locationType = this.getAttribute('data-location');
                    
                    // Modal'ƒ± kapat
                    setTimeout(hideLocationModal, 500);
                });
            });
            
            // Konum tespit butonu
            document.getElementById('detectLocationBtn').addEventListener('click', function() {
                // Konum tespit sim√ºlasyonu
                const resultDiv = document.getElementById('locationResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `
                    <div style="color: var(--success);">
                        <i class="fas fa-check-circle"></i> 
                        <strong>Konumunuz Belirlendi!</strong>
                        <div style="font-size: 12px; margin-top: 5px;">
                            Kadƒ±k√∂y, ƒ∞stanbul
                        </div>
                    </div>
                `;
            });
            
            // Dƒ±≈üarƒ± tƒ±klayƒ±nca modal'ƒ± kapat
            window.addEventListener('click', function(e) {
                if (e.target === document.getElementById('locationModal')) {
                    hideLocationModal();
                }
            });
        });
        
        // Konum modalƒ±nƒ± g√∂ster
        function showLocationModal() {
            document.getElementById('locationModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        // Konum modalƒ±nƒ± gizle
        function hideLocationModal() {
            document.getElementById('locationModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

  

        // =============================================
        // BA≈ûLANGI√á KODLARI - 1. B√ñL√úM √ñNCESƒ∞
        // =============================================

        // Supabase configuration
        const SUPABASE_URL = "https://xliutvspwodhoaxvysks.supabase.co";
        const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhsaXV0dnNwd29kaG9heHZ5c2tzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNTgyOTksImV4cCI6MjA3MjkzNDI5OX0.Zodisa_ifP8t2Q4X0ecnB56RiR_Bg4QS5gvPn5ZLK_w";

        // Initialize Supabase client
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);





// =============================================
// TAMAMEN Dƒ∞NAMƒ∞K SESLƒ∞ Sƒ∞PARƒ∞≈û Sƒ∞STEMƒ∞
// =============================================

// Global state - Dinamik
let currentCustomer = null;
let sellers = [];
let products = [];
let categories = [];
let storeTypes = [];
let cart = [];
let recognition = null;
let isListening = false;
let isMicrophoneEnabled = false;
let conversationStep = 0;
let currentPaymentMethod = null;
let selectedSellerId = null;
let selectedSellerType = null;
let selectedStoreTypeId = null;
let selectedStoreTypeName = null;
let selectedCategoryId = null;
let isSellerLocked = false;
let selectedLocation = null;
let referralCode = null;
let referralGroupCode = null;
let allSellersInLocation = [];
let filteredSellers = [];
let pendingCart = [];
let isGuestMode = false;
let pendingOrder = null;
let currentRoot = "0:0";
let pendingResponse = null;
let commandRules = new Map();

// Konum state
let userLocation = {
    latitude: null,
    longitude: null,
    address: null,
    city: null,
    district: null
};
let isLocationDetected = false;


  // DOM Elements
        const profileBtn = document.getElementById('profileBtn');
        const profileDropdown = document.getElementById('profileDropdown');
        const profileAvatar = document.getElementById('profileAvatar');
        const profileName = document.getElementById('profileName');
        const profilePhone = document.getElementById('profilePhone');
        const profileCity = document.getElementById('profileCity');
        const profileAddress = document.getElementById('profileAddress');
        const profileBonus = document.getElementById('profileBonus');
        const logoutBtn = document.getElementById('logoutBtn');
        const userName = document.getElementById('userName');
        const microphoneToggle = document.getElementById('microphoneToggle');
        const sellerTypeGrid = document.getElementById('sellerTypeGrid');
        const scrollSellerTypesLeft = document.getElementById('scrollSellerTypesLeft');
        const scrollSellerTypesRight = document.getElementById('scrollSellerTypesRight');
        const categoriesSection = document.getElementById('categoriesSection');
        const categoriesTitle = document.getElementById('categoriesTitle');
        const categoriesGrid = document.getElementById('categoriesGrid');
        const scrollCategoriesLeft = document.getElementById('scrollCategoriesLeft');
        const scrollCategoriesRight = document.getElementById('scrollCategoriesRight');
        const sellersSection = document.getElementById('sellersSection');
        const sellerGrid = document.getElementById('sellerGrid');
        const scrollSellersLeft = document.getElementById('scrollSellersLeft');
        const scrollSellersRight = document.getElementById('scrollSellersRight');
        const productsSection = document.getElementById('productsSection');
        const selectedSellerInfo = document.getElementById('selectedSellerInfo');
        const productsGrid = document.getElementById('productsGrid');
        const cartContainer = document.getElementById('cartContainer');
        const cartClose = document.getElementById('cartClose');
        const cartItems = document.getElementById('cartItems');
        const orderSummary = document.getElementById('orderSummary');
        const orderCount = document.getElementById('orderCount');
        const orderTotal = document.getElementById('orderTotal');
        const subtotalEl = document.getElementById('subtotal');
        const discountEl = document.getElementById('discount');
        const vatAmountEl = document.getElementById('vatAmount');
        const totalAmountEl = document.getElementById('totalAmount');
        const payCashBtn = document.getElementById('payCash');
        const payCardBtn = document.getElementById('payCard');
        const payBonusBtn = document.getElementById('payBonus');
        const assistantMessage = document.getElementById('assistantMessage');
        const userMessage = document.getElementById('userMessage');
        const voiceIndicator = document.getElementById('voiceIndicator');
        const closeVoiceStatus = document.getElementById('closeVoiceStatus');
        const voiceStatusPanel = document.getElementById('voiceStatusPanel');
        const howItWorks = document.getElementById('howItWorks');
        const locationMarker = document.getElementById('locationMarker');
        const locationText = document.getElementById('locationText');
        const locationModal = document.getElementById('locationModal');
        const referralLink = document.getElementById('referralLink');
        const whatsappOrder = document.getElementById('whatsappOrder');

        // Utility functions
        function money(n) { 
            return Number(n||0).toLocaleString('tr-TR',{minimumFractionDigits:2, maximumFractionDigits:2}) + ' ‚Ç∫'; 
        }

        // Debug modu
        const DEBUG_MODE = true;

        // Debug fonksiyonu
        function debugLog(message, data = null) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${new Date().toLocaleTimeString()}: ${message}`, data || '');
            }
        }

// =============================================
// ANA UYGULAMA BA≈ûLATMA - Dƒ∞NAMƒ∞K
// =============================================

async function initApp() {
    try {
        debugLog('üöÄ === Dƒ∞NAMƒ∞K UYGULAMA BA≈ûLATILIYOR ===');
        
        // 1. T√ºm dinamik verileri y√ºkle
        await loadAllDynamicData();
        
        // 2. DOM hazƒ±r olana kadar bekle
        await waitForDOMElements();
        
        // 3. Dinamik event handler'larƒ± ayarla
        setupDynamicEventHandlers();
        
        // 4. Oturumu geri y√ºkle
        await restoreSession();
        
        // 5. Konum y√∂netimini ba≈ülat
        initializeDynamicLocation();
        
        // 6. UI'ƒ± g√ºncelle
        updateUIAfterDynamicLogin();
        
        debugLog('üéâ === Dƒ∞NAMƒ∞K UYGULAMA BA≈ûLATMA TAMAMLANDI ===');

    } catch (error) {
        console.error('üí• Dinamik uygulama ba≈ülatma hatasƒ±:', error);
        dynamicEmergencyFallback();
    }
}

// T√ºm dinamik verileri y√ºkle
async function loadAllDynamicData() {
    await loadCommandRules();
    await loadStoreTypes();
    await loadLanguageOptions();
    debugLog('‚úÖ T√ºm dinamik veriler y√ºklendi');
}

// =============================================
// Dƒ∞NAMƒ∞K KOMUT Sƒ∞STEMƒ∞ - VERƒ∞TABANI ODAKLI
// =============================================

async function loadCommandRules() {
    try {
        const { data, error } = await supabase
            .from('voice_command_rules')
            .select('*')
            .eq('is_active', true)
            .order('priority', { ascending: false });

        if (error) throw error;

        commandRules.clear();
        data.forEach(rule => {
            if (!commandRules.has(rule.root_code)) {
                commandRules.set(rule.root_code, []);
            }
            commandRules.get(rule.root_code).push(rule);
        });

        debugLog(`‚úÖ ${data.length} komut kuralƒ± y√ºklendi`);
    } catch (error) {
        console.error('Komut kurallarƒ± y√ºkleme hatasƒ±:', error);
        await createDefaultCommandRules();
    }
}

// Varsayƒ±lan komut kurallarƒ±nƒ± olu≈ütur
async function createDefaultCommandRules() {
    const defaultRules = [
        // Ba≈ülangƒ±√ß komutlarƒ±
        {
            root_code: '0:0',
            input_patterns: 'merhaba|selam|ba≈üla|hello|start',
            output_text: 'Merhaba! Sesli sipari≈ü sistemine ho≈ü geldiniz. L√ºtfen konumunuzu se√ßin.',
            next_root: '1:0',
            action_name: 'show_location_modal',
            priority: 10
        },
        
        // Konum komutlarƒ±
        {
            root_code: '1:0',
            input_patterns: 'restoran i√ßi|i√ßerde|yerinde',
            output_text: 'Restoran i√ßi se√ßildi.',
            next_root: '2:0',
            action_name: 'select_location',
            priority: 10
        },
        {
            root_code: '1:0',
            input_patterns: 'paket servis|paket|g√∂t√ºr',
            output_text: 'Paket servis se√ßildi.',
            next_root: '2:0',
            action_name: 'select_location',
            priority: 10
        },
        {
            root_code: '1:0',
            input_patterns: 'adrese teslim|teslimat|evime',
            output_text: 'Adrese teslim se√ßildi.',
            next_root: '2:0',
            action_name: 'select_location',
            priority: 10
        },
        
        // Maƒüaza tipi komutlarƒ±
        {
            root_code: '2:0',
            input_patterns: 'regex:(?<storeType>market|restoran|eczane|fƒ±rƒ±n|kafe)',
            output_text: '{storeType} se√ßiliyor...',
            next_root: '3:0',
            action_name: 'select_store_type',
            priority: 10
        },
        
        // Satƒ±cƒ± komutlarƒ±
        {
            root_code: '3:0',
            input_patterns: 'regex:birinci|ilk|1',
            output_text: 'Birinci satƒ±cƒ± se√ßiliyor...',
            next_root: '4:0',
            action_name: 'select_seller',
            priority: 10
        },
        {
            root_code: '3:0',
            input_patterns: 'regex:ikinci|2',
            output_text: 'ƒ∞kinci satƒ±cƒ± se√ßiliyor...',
            next_root: '4:0',
            action_name: 'select_seller',
            priority: 9
        },
        
        // Reyon komutlarƒ±
        {
            root_code: '4:0',
            input_patterns: 'meyve|sebze|meyve sebze',
            output_text: 'Meyve ve sebze reyonu se√ßildi.',
            next_root: '5:0',
            action_name: 'select_category',
            priority: 10
        },
        {
            root_code: '4:0',
            input_patterns: 's√ºt|peynir|yoƒüurt|s√ºt √ºr√ºn',
            output_text: 'S√ºt √ºr√ºnleri reyonu se√ßildi.',
            next_root: '5:0',
            action_name: 'select_category',
            priority: 10
        },
        
        // √úr√ºn komutlarƒ±
        {
            root_code: '5:0',
            input_patterns: 'regex:(?<quantity>\d+)\s*(?<product>.*)',
            output_text: '{quantity} adet {product} sepete ekleniyor...',
            next_root: '5:0',
            action_name: 'add_to_cart',
            priority: 10
        },
        {
            root_code: '5:0',
            input_patterns: 'sepete git|sepetim|sepet',
            output_text: 'Sepetiniz a√ßƒ±lƒ±yor...',
            next_root: '6:0',
            action_name: 'manage_cart',
            priority: 9
        },
        
        // Sepet komutlarƒ±
        {
            root_code: '6:0',
            input_patterns: '√∂deme yap|√∂de|satƒ±n al',
            output_text: '√ñdeme y√∂ntemi se√ßiliyor...',
            next_root: '7:0',
            action_name: 'select_payment',
            priority: 10
        },
        
        // √ñdeme komutlarƒ±
        {
            root_code: '7:0',
            input_patterns: 'nakit|para',
            output_text: 'Nakit √∂deme se√ßildi.',
            next_root: '8:0',
            action_name: 'select_payment',
            priority: 10
        },
        {
            root_code: '7:0',
            input_patterns: 'kart|kredi|bank',
            output_text: 'Kart ile √∂deme se√ßildi.',
            next_root: '8:0',
            action_name: 'select_payment',
            priority: 10
        }
    ];

    // Varsayƒ±lan kurallarƒ± veritabanƒ±na kaydet
    for (const rule of defaultRules) {
        const { error } = await supabase
            .from('voice_command_rules')
            .insert([rule]);
        
        if (error) {
            console.error('Varsayƒ±lan kural ekleme hatasƒ±:', error);
        }
    }

    // Belleƒüe y√ºkle
    defaultRules.forEach(rule => {
        if (!commandRules.has(rule.root_code)) {
            commandRules.set(rule.root_code, []);
        }
        commandRules.get(rule.root_code).push(rule);
    });
}

// =============================================
// Dƒ∞NAMƒ∞K SES KOMUT ƒ∞≈ûLEME
// =============================================

async function processVoiceCommand(transcript) {
    const message = transcript.toLowerCase().trim();
    if (userMessage) userMessage.textContent = transcript;

    debugLog(`üîä Komut i≈üleniyor: "${message}" | K√∂k: ${currentRoot}`);

    // 1. Askƒ±da cevap varsa, onu i≈üle
    if (pendingResponse) {
        return handlePendingDynamicResponse(message);
    }

    // 2. Mevcut k√∂k i√ßin kurallarƒ± ara
    const match = await findDynamicRuleMatch(message, currentRoot);
    
    if (match) {
        await executeDynamicMatchedRule(match, message);
    } else {
        // 3. E≈üle≈üme yoksa AI'ya y√∂nlendir
        await handleDynamicAIRequest(message, currentRoot);
    }
}

// Dinamik kural e≈üle≈ütirme
async function findDynamicRuleMatch(message, root) {
    const rules = commandRules.get(root) || [];
    
    for (const rule of rules) {
        const patterns = rule.input_patterns.split('|');
        for (const pattern of patterns) {
            const matchResult = matchesDynamicPattern(message, pattern);
            if (matchResult.matches) {
                return { 
                    rule, 
                    pattern, 
                    extractedData: matchResult.extractedData 
                };
            }
        }
    }
    return null;
}

// Dinamik pattern e≈üle≈ütirme
function matchesDynamicPattern(message, pattern) {
    const result = { matches: false, extractedData: {} };
    
    if (pattern.startsWith('regex:')) {
        const regexPattern = pattern.replace('regex:', '');
        const regex = new RegExp(regexPattern, 'i');
        const match = message.match(regex);
        
        if (match) {
            result.matches = true;
            if (match.groups) {
                result.extractedData = match.groups;
            }
        }
    } else if (message.includes(pattern)) {
        result.matches = true;
        result.extractedData = { text: pattern };
    }
    
    return result;
}

// E≈üle≈üen kuralƒ± √ßalƒ±≈ütƒ±r
async function executeDynamicMatchedRule(match, message) {
    const { rule, extractedData } = match;
    
    // Dinamik √ßƒ±ktƒ± hazƒ±rla
    let output = rule.output_text;
    for (const [key, value] of Object.entries(extractedData)) {
        output = output.replace(`{${key}}`, value);
    }
    
    // Sesli cevap ver
    speakToUser(output);
    
    // Dinamik aksiyonu √ßalƒ±≈ütƒ±r
    if (rule.action_name) {
        await executeDynamicAction(rule.action_name, { 
            extractedData, 
            message 
        });
    }
    
    // K√∂k ge√ßi≈üini y√∂net
    if (rule.next_root) {
        if (rule.next_root.includes('?')) {
            pendingResponse = { nextRoot: rule.next_root, context: extractedData };
        } else {
            currentRoot = rule.next_root;
        }
    }
}

// =============================================
// Dƒ∞NAMƒ∞K AKSƒ∞YON FONKSƒ∞YONLARI
// =============================================

async function executeDynamicAction(actionName, data) {
    console.log(`‚ö° Dinamik Aksiyon: ${actionName}`, data);
    
    try {
        switch(actionName) {
            // KONUM AKSƒ∞YONLARI
            case 'show_location_modal':
                showDynamicLocationModal();
                break;
                
            case 'select_location':
                await handleDynamicLocationSelection(data);
                break;
                
            // MAƒûAZA Tƒ∞Pƒ∞ AKSƒ∞YONLARI
            case 'select_store_type':
                await handleDynamicStoreTypeSelection(data);
                break;
                
            // SATICI AKSƒ∞YONLARI
            case 'select_seller':
                await handleDynamicSellerSelection(data);
                break;
                
            // REYON AKSƒ∞YONLARI
            case 'select_category':
                await handleDynamicCategorySelection(data);
                break;
                
            // √úR√úN AKSƒ∞YONLARI
            case 'add_to_cart':
                await handleDynamicAddToCart(data);
                break;
                
            // SEPET AKSƒ∞YONLARI
            case 'manage_cart':
                await handleDynamicCartManagement(data);
                break;
                
            // √ñDEME AKSƒ∞YONLARI
            case 'select_payment':
                await handleDynamicPaymentSelection(data);
                break;
                
            // Sƒ∞STEM AKSƒ∞YONLARI
            case 'navigate_back':
                await handleDynamicNavigation(data);
                break;
                
            case 'show_help':
                await handleDynamicHelp(data);
                break;
                
            default:
                await handleUnknownDynamicAction(actionName, data);
        }
    } catch (error) {
        console.error(`Dinamik aksiyon hatasƒ± (${actionName}):`, error);
        speakToUser("√úzg√ºn√ºm, bir hata olu≈ütu. L√ºtfen tekrar deneyin.");
    }
}

// =============================================
// Dƒ∞NAMƒ∞K KONUM Sƒ∞STEMƒ∞
// =============================================

function showDynamicLocationModal() {
    const modal = document.getElementById('locationModal');
    if (!modal) return;

    document.body.classList.add('modal-open');
    modal.style.display = 'flex';
    modal.style.zIndex = '10000';
    
    updateDynamicLocationModal();
    setupDynamicModalCloseEvents();
    
    debugLog('üìç Dinamik konum modalƒ± g√∂sterildi');
    speakToUser("L√ºtfen konumunuzu se√ßin: restoran i√ßi, paket servis veya adrese teslim.");
}

function updateDynamicLocationModal() {
    const locationModal = document.getElementById('locationModal');
    if (!locationModal) return;
    
    locationModal.querySelector('.modal-body').innerHTML = `
        <div class="modal-header">
            <h3>Konum Se√ßiniz</h3>
            <span class="close-modal" id="closeLocationModal">&times;</span>
        </div>
        <p>Sipari≈üiniz i√ßin l√ºtfen konumunuzu belirleyin:</p>
        
        <div class="location-options">
            <div class="location-option" data-location="inside">
                <div class="location-icon">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="location-details">
                    <h4>Restoran i√ßinde</h4>
                    <p>Yemeƒüinizi restoranda yiyin</p>
                </div>
            </div>
            
            <div class="location-option" data-location="takeaway">
                <div class="location-icon">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <div class="location-details">
                    <h4>Paket servis</h4>
                    <p>Yemeƒüinizi kendiniz alƒ±n</p>
                </div>
            </div>
            
            <div class="location-option" data-location="delivery">
                <div class="location-icon">
                    <i class="fas fa-motorcycle"></i>
                </div>
                <div class="location-details">
                    <h4>Adrese teslim</h4>
                    <p>Yemeƒüiniz adresinize gelsin</p>
                </div>
            </div>
        </div>

        <button id="detectLocationBtn" class="location-detect-btn">
            <i class="fas fa-location-arrow"></i>
            Konumumu Otomatik Belirle
        </button>
        
        <div id="locationResult" class="location-result" style="display: none;"></div>
    `;
    
    setupDynamicLocationOptionEvents();
}

async function handleDynamicLocationSelection(data) {
    const locationType = data.extractedData?.location;
    
    if (!locationType) {
        speakToUser("Konum tipi belirtilmedi. L√ºtfen restoran i√ßi, paket servis veya adrese teslim se√ßin.");
        return;
    }
    
    // Adrese teslim i√ßin konum tespiti gerekli
    if (locationType === 'delivery' && !isLocationDetected) {
        const success = await detectUserLocation();
        if (!success) {
            speakToUser("Adrese teslim i√ßin konumunuzu tespit edemiyorum. L√ºtfen manuel olarak konumunuzu belirleyin.");
            return;
        }
    }
    
    selectDynamicLocation(locationType);
}

function selectDynamicLocation(locationType) {
    selectedLocation = locationType;
    localStorage.setItem('selectedLocation', locationType);
    
    if (userLocation) {
        localStorage.setItem('userLocation', JSON.stringify(userLocation));
    }
    
    updateDynamicLocationText();
    hideDynamicLocationModal();
    currentRoot = "2:0";
    
    // Konum se√ßildiƒüinde t√ºm satƒ±cƒ±larƒ± y√ºkle
    loadAllSellersByLocation();
    
    const locationNames = {
        'inside': 'Restoran i√ßinde',
        'takeaway': 'Paket servis',
        'delivery': 'Adrese teslim'
    };
    
    let locationMessage = `${locationNames[locationType]} se√ßildi.`;
    if (locationType === 'delivery' && userLocation.city) {
        locationMessage += ` Konumunuz: ${userLocation.district}, ${userLocation.city}.`;
    }
    
    locationMessage += " Hangi maƒüaza tipinden alƒ±≈üveri≈ü yapmak istersiniz?";
    
    speakToUser(locationMessage);
}

// =============================================
// Dƒ∞NAMƒ∞K MAƒûAZA Tƒ∞Pƒ∞ Sƒ∞STEMƒ∞
// =============================================

async function handleDynamicStoreTypeSelection(data) {
    const storeTypeName = data.extractedData?.storeType || await extractStoreTypeFromMessage(data.message);
    
    if (!storeTypeName) {
        const availableStoreTypes = await getAvailableStoreTypes();
        speakToUser(`Hangi maƒüaza tipini se√ßmek istiyorsunuz? ${availableStoreTypes}`);
        return;
    }
    
    const storeType = await findStoreTypeByName(storeTypeName);
    if (storeType) {
        await onStoreTypeSelected(storeType.id, storeType.name);
    } else {
        const availableStoreTypes = await getAvailableStoreTypes();
        speakToUser(`"${storeTypeName}" bulunamadƒ±. Mevcut maƒüaza tipleri: ${availableStoreTypes}`);
    }
}

async function onStoreTypeSelected(storeTypeId, storeTypeName) {
    debugLog("üõçÔ∏è Store type se√ßildi:", storeTypeName, "ID:", storeTypeId);
   
    selectedStoreTypeId = storeTypeId;
    selectedStoreTypeName = storeTypeName;
    currentRoot = "3:0";
    
    filterSellersByStoreType(storeTypeId);
    
    selectedCategoryId = null;
    products = [];
    resetProductAndCategoryUI();
    
    speakToUser(`${storeTypeName} se√ßildi. ${filteredSellers.length} satƒ±cƒ± bulundu. L√ºtfen bir satƒ±cƒ± se√ßin.`);
}

// =============================================
// Dƒ∞NAMƒ∞K SATICI Sƒ∞STEMƒ∞
// =============================================

async function handleDynamicSellerSelection(data) {
    if (!selectedStoreTypeId) {
        speakToUser("√ñnce bir maƒüaza tipi se√ßmelisiniz.");
        return;
    }
    
    const seller = await findDynamicSeller(data.extractedData, data.message);
    if (seller) {
        await selectDynamicSeller(seller);
        currentRoot = "4:0";
    } else {
        speakToUser("Satƒ±cƒ± bulunamadƒ±. L√ºtfen numarasƒ±nƒ± veya ismini s√∂yleyin.");
    }
}

async function selectDynamicSeller(seller) {
    debugLog(`üéØ Satƒ±cƒ± se√ßiliyor: ${seller.business_name}`);
    
    // Teslimat kontrol√º
    if (selectedLocation === 'delivery' && seller.delivery_available === false) {
        speakToUser("Bu satƒ±cƒ± konumunuza teslimat yapmƒ±yor. L√ºtfen ba≈üka bir satƒ±cƒ± se√ßin.");
        return;
    }
    
    // √ñnceki se√ßimleri temizle
    document.querySelectorAll('.seller-card, .category-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    const sellerCard = document.querySelector(`[data-seller-id="${seller.id}"]`);
    if (sellerCard) {
        sellerCard.classList.add('selected');
    }
    
    selectedSellerId = seller.id;
    selectedCategoryId = null;
    products = [];
    
    // UI temizleme
    if (categoriesGrid) {
        categoriesGrid.innerHTML = '<div class="text-center">Y√ºkleniyor...</div>';
    }
    if (productsGrid) {
        productsGrid.innerHTML = '<div class="text-center">Bir reyon se√ßin</div>';
    }
    
    // Satƒ±cƒ± bilgisini g√ºncelle
    if (selectedSellerInfo) {
        selectedSellerInfo.innerHTML = `
            <i class="fas fa-store"></i> ${seller.business_name} 
            <small style="color: var(--gray);">- ${seller.city || ''}</small>
        `;
    }
    
    // Reyonalarƒ± y√ºkle
    await loadReyonsBySeller(seller.id);
    
    // B√∂l√ºm g√∂r√ºn√ºrl√ºƒü√ºn√º ayarla
    if (categoriesSection) categoriesSection.style.display = 'block';
    if (productsSection) productsSection.style.display = 'none';
    
    debugLog(`‚úÖ Satƒ±cƒ± se√ßildi: ${seller.business_name}`);
    
    // Teslimat durumuna g√∂re mesaj
    let deliveryMsg = "";
    if (selectedLocation === 'delivery' && seller.delivery_available !== false) {
        deliveryMsg = seller.delivery_fee > 0 ? 
            ` Teslimat √ºcreti: ${money(seller.delivery_fee)}.` : 
            " √úcretsiz teslimat.";
    }
    
    speakToUser(`${seller.business_name} se√ßildi.${deliveryMsg} ≈ûimdi bir reyon se√ßin.`);
}

// =============================================
// Dƒ∞NAMƒ∞K REYON Sƒ∞STEMƒ∞
// =============================================

async function handleDynamicCategorySelection(data) {
    if (!selectedSellerId) {
        speakToUser("√ñnce bir satƒ±cƒ± se√ßmelisiniz.");
        return;
    }
    
    const category = await findDynamicCategory(data.extractedData, data.message);
    if (category) {
        await selectDynamicCategory(category);
        currentRoot = "5:0";
    } else {
        const availableCategories = await getAvailableCategories();
        speakToUser(`Reyon bulunamadƒ±. Mevcut reyonlar: ${availableCategories}`);
    }
}

async function selectDynamicCategory(category) {
    const categoryCard = document.querySelector(`[data-category-id="${category.id}"]`);
    if (categoryCard) {
        document.querySelectorAll('.category-card').forEach(c => {
            c.classList.remove('selected');
        });
        
        categoryCard.classList.add('selected');
        selectedCategoryId = category.id;
        
        await loadProductsByReyon(category.id);
        
        debugLog(`üõí Reyon se√ßildi: ${category.name}`);
        speakToUser(`${category.name} reyonu se√ßildi. √úr√ºnler listeleniyor. Sesli olarak √ºr√ºn sipari≈üi verebilirsiniz.`);
    }
}

// =============================================
// Dƒ∞NAMƒ∞K √úR√úN Sƒ∞STEMƒ∞
// =============================================

async function handleDynamicAddToCart(data) {
    if (!selectedSellerId) {
        speakToUser("√ñnce bir satƒ±cƒ± se√ßmelisiniz.");
        return;
    }
    
    if (products.length === 0) {
        speakToUser("Hen√ºz √ºr√ºn y√ºklenmedi. L√ºtfen bir reyon se√ßin.");
        return;
    }
    
    const productInfo = extractDynamicProductInfo(data.extractedData, data.message);
    if (!productInfo) {
        speakToUser("√úr√ºn ismini anlayamadƒ±m. L√ºtfen 'iki ekmek' veya 's√ºt ekle' gibi s√∂yleyin.");
        return;
    }
    
    const { productName, quantity } = productInfo;
    const product = findProductByName(productName);
    
    if (product) {
        addToCart(product, quantity);
        speakToUser(`${quantity} ${product.unit_type || 'adet'} ${product.name} sepete eklendi.`);
        
        // AI √∂ƒürenmesi i√ßin kaydet
        await saveSuccessfulProductMatch(data.message, product.name);
    } else {
        handleDynamicProductNotFound(data.message, productName);
    }
}

// =============================================
// Dƒ∞NAMƒ∞K YARDIMCI FONKSƒ∞YONLAR
// =============================================

// Dinamik satƒ±cƒ± bulma
async  (extractedData, message) {
    // Index ile arama
    if (extractedData?.sellerIndex) {
        const index = parseInt(extractedData.sellerIndex) - 1;
        if (index >= 0 && index < sellers.length) {
            return sellers[index];
        }
    }
    
    // ƒ∞sim ile arama
    if (extractedData?.sellerName) {
        return sellers.find(s => 
            s.business_name.toLowerCase().includes(extractedData.sellerName.toLowerCase())
        );
    }
    
    // Mesajdan √ßƒ±karƒ±m
    const sellerName = await extractSellerFromMessage(message);
    if (sellerName) {
        return sellers.find(s => 
            s.business_name.toLowerCase().includes(sellerName.toLowerCase())
        );
    }
    
    return null;
}

// Dinamik reyon bulma
async function findDynamicCategory(extractedData, message) {
    // Index ile arama
    if (extractedData?.categoryIndex) {
        const index = parseInt(extractedData.categoryIndex) - 1;
        if (index >= 0 && index < categories.length) {
            return categories[index];
        }
    }
    
    // ƒ∞sim ile arama
    if (extractedData?.categoryName) {
        return categories.find(c => 
            c.name.toLowerCase().includes(extractedData.categoryName.toLowerCase())
        );
    }
    
    return null;
}

// Dinamik √ºr√ºn bilgisi √ßƒ±karƒ±mƒ±
function extractDynamicProductInfo(extractedData, message) {
    // √ñncelikle extractedData'dan al
    if (extractedData?.product && extractedData?.quantity) {
        return {
            productName: extractedData.product,
            quantity: parseInt(extractedData.quantity)
        };
    }
    
    // Fallback: mesajdan √ßƒ±kar
    return extractProductInfoFromCommand(message);
}

// =============================================
// Dƒ∞NAMƒ∞K EVENT HANDLER'LAR
// =============================================

function setupDynamicEventHandlers() {
    // Mikrofon
    if (microphoneToggle) {
        microphoneToggle.addEventListener('click', handleDynamicMicrophoneToggle);
    }
    
    // Konum
    setupDynamicLocationEvents();
    
    // Sepet
    if (orderSummary) {
        orderSummary.addEventListener('click', toggleDynamicCart);
    }
    if (cartClose) {
        cartClose.addEventListener('click', closeDynamicCart);
    }
    
    // √ñdeme butonlarƒ±
    if (payCashBtn) payCashBtn.addEventListener('click', () => finalizeDynamicOrder('nakit'));
    if (payCardBtn) payCardBtn.addEventListener('click', () => finalizeDynamicOrder('kart'));
    if (payBonusBtn) payBonusBtn.addEventListener('click', () => finalizeDynamicOrder('bonus'));
}

function handleDynamicMicrophoneToggle() {
    if (!selectedLocation) {
        showDynamicLocationModal();
        speakToUser("L√ºtfen √∂nce bir konum se√ßiniz.");
        return;
    }
    
    if (isListening) {
        disableDynamicMicrophone();
    } else {
        enableDynamicMicrophone();
    }
}

// =============================================
// Dƒ∞NAMƒ∞K FALLBACK ve AI Sƒ∞STEMƒ∞
// =============================================

async function handleUnknownDynamicAction(actionName, data) {
    const aiResponse = await queryDynamicAI(data.message, currentRoot);
    
    if (aiResponse.confidence > 0.7) {
        speakToUser(aiResponse.message);
        if (aiResponse.suggestedAction) {
            await executeDynamicAction(aiResponse.suggestedAction, data);
        }
    } else {
        const contextualHelp = await getDynamicContextualHelp(currentRoot);
        speakToUser(contextualHelp);
    }
}

async function getDynamicContextualHelp(rootCode) {
    const { data } = await supabase
        .from('voice_context_help')
        .select('help_message')
        .eq('root_code', rootCode)
        .eq('is_active', true)
        .single();
        
    return data?.help_message || "Nasƒ±l yardƒ±mcƒ± olabilirim? Sesli olarak sipari≈ü verebilir veya 'yardƒ±m' diyebilirsiniz.";
}

// =============================================
// BA≈ûLANGI√á FONKSƒ∞YONLARI
// =============================================

document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ DOM y√ºklendi, dinamik uygulama ba≈ülatƒ±lƒ±yor...');
    initApp();
});

// Dinamik acil durum modu
function dynamicEmergencyFallback() {
    debugLog('üÜò Dinamik acil durum modu aktif');
    setupDynamicLocationEvents();
    
    if (!selectedLocation) {
        setTimeout(() => {
            showDynamicLocationModal();
        }, 2000);
    }
}
</script>	
</body>

</html>
